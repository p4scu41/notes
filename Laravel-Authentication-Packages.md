References

- [Which Laravel authentication package to choose?](https://medium.com/@antoine.lame/which-laravel-authentication-package-to-choose-290551a82a44)
  ![Laravel-Authentication-Packages-How-To-Choose](Laravel-Authentication-Packages-How-To-Choose.webp)
- [Laravel Authentication Packages: A Comparative Analysis](https://aglowiditsolutions.com/blog/laravel-authentication/)
  ![Laravel-Authentication-Packages-Comparison](./Laravel-Authentication-Packages-Comparison.jpg)

---

### [Laravel UI](https://github.com/laravel/ui)

- legacy, uses Bootstrap CSS framework
- Bootstrap, React, or Vue
- composer require laravel/ui
- php artisan ui vue --auth
- npm install
- npm run dev

---

### [Laravel Breeze](https://github.com/laravel/breeze)

- Starter Kits uses Breeze
- Minimalist, lightweight authentication scaffolding
- Includes login, registration, password reset, forgot password, email verification, and password confirmation
- Includes a simple "profile" page where the user may update their name, email address, and password
- Blade templates styled with Tailwind CSS
- Provides scaffolding options based on Livewire or Inertia (Vue or React)
- _API only_ option scaffold an authentication API that is ready to authenticate modern JavaScript applications such as those powered by Next or Nuxt
- [Next reference implementation](https://github.com/laravel/breeze-next)
- Includes [Laravel Sanctum](https://github.com/laravel/sanctum) (but it is not used) and [Ziggy](https://github.com/tighten/ziggy)
- Login is based on Session
- Uses uppercase in resources/js directories
- composer require laravel/breeze --dev
- php artisan breeze:install
  - Which Breeze stack would you like to install?
    - [ ] Blade with Alpine
    - [ ] Livewire (Volt Class API) with Alpine
    - [ ] Livewire (Volt Functional API) with Alpine
    - [ ] React with Inertia
    - [x] Vue with Inertia
    - [ ] API only
  - Would you like any optional features?
    - [x] Dark mode
    - [ ] Inertia SSR
    - [x] TypeScript
    - [x] ESLint with Prettier
  - Which testing framework do you prefer?
    - [x] Pest
    - [ ] PHPUnit
- php artisan migrate
- npm install --legacy-peer-deps
- npm run dev
- Files created/updated
  - app/Http/Controllers/Auth/
  - app/Http/Controllers/ProfileController.php
  - app/Http/Middleware/HandleInertiaRequests.php
  - app/Http/Requests/Auth/LoginRequest.php
  - app/Providers/AppServiceProvider.php // _Vite::prefetch(concurrency: 3)_
  - bootstrap/app.php
    - withMiddleware -> web
    - \App\Http\Middleware\HandleInertiaRequests::class
    - \Illuminate\Http\Middleware\AddLinkHeadersForPreloadedAssets::class
  - resources/css/app.css // _@tailwind_
  - resources/js/app.ts
  - resources/js/bootstrap.ts
  - resources/js/Components/ // _General Vue Components_
  - resources/js/Layouts/
  - resources/js/Pages/
  - resources/js/types/
  - resources/views/app.blade.php
    - @routes // _Ziggy_
    - @vite(['resources/js/app.ts', "resources/js/Pages/{$page['component']}.vue"])
    - @inertiaHead
    - @inertia
  - routes/auth.php
  - routes/web.php
  - tests/Feature/Auth/
  - tests/Feature/ProfileTest.php
  - tests/Pest.php
  - .eslintrc.cjs, .prettierrc, postcss.config.js, tailwind.config.js, tsconfig.json, vite.config.js

---

### [Laravel Starter Kits](https://laravel.com/starter-kits)

- Evolution of Laravel Breeze
- laravel new project --vue --pest --git // _composer create-project laravel/laravel project_
  - Which starter kit would you like to install?
    - [ ] None
    - [ ] React
    - [x] Vue
    - [ ] Livewire
  - Which authentication provider do you prefer?
    - [x] Laravel's built-in authentication
    - [ ] WorkOS
  - Which testing framework do you prefer?
    - [x] Pest
    - [ ] PHPUni
  - Starter Kits
    - React 19, TypeScript, Inertia 2, [shadcn/ui](https://ui.shadcn.com/)
    - Vue 3, TypeScript, Inertia 2, [shadcn-vue](https://www.shadcn-vue.com/)
    - Livewire 3, [Laravel Volt](https://livewire.laravel.com/docs/volt), [Flux UI](https://fluxui.dev/)
- Includes
  - Built-in Laravel authentication (based on Session)
    - Login, registration, password reset, and email verification
  - [WorkOS](https://workos.com/) [AuthKit](https://www.authkit.com/) authentication
    - Login with GitHub, Google, Microsoft, or Apple ID, Passkey support, code sent via email, built-in rate limiting, geographical protection, and SSO
  - Customer dashboard
  - User settings: user profile, password
  - Appearance management: Light and dark
  - Configurable layouts
    - Authentication layouts: simple, card, or split
    - Application layouts: sidebar, or header
    - Sidebar layouts: default, inset, floating
  - Tailwind CSS V4
  - TypeScript supported
  - Built-in CI workflows
    - GitHub Actions workflows for automated testing and code linting
  - Publish additional shadcn components
    - npx shadcn@latest add switch // _React_
    - npx shadcn-vue@latest add switch // _Vue_
  - hooks (React) and composables (Vue)
  - Inertia SSR
    - npm run build:ssr
    - composer dev:ssr
  - email verification
    - App/Models/User -> implements MustVerifyEmail
    - verified middleware to the routes
    - php artisan vendor:publish --tag=laravel-mail
- Uses lowercase in resources/js directories
- Uses [laravel/wayfinder](https://github.com/laravel/wayfinder)
  - Bridge Laravel backend and TypeScript frontend
  - Generates fully-typed, importable TypeScript functions for your controllers and routes
  - Routes are generated during Vite's build step and whenever files change while running the Vite's dev server
  - php artisan wayfinder:generate --with-form // _Generate TypeScript definitions for your routes _and controller methods
  - Generates files in three directories (wayfinder, actions, and routes) within resources/js
  - import { show } from "@/actions/App/Http/Controllers/PostController";
  - show(1); // _{ url: "/posts/1", method: "get" }_
  - Using [Inertia](https://inertiajs.com/forms#wayfinder), pass the result of a Wayfinder method to the submit method of useForm
    - form.submit(store())
    - \<Form :action="store()">
- Files created/updated
  - app/Http/Controllers/Auth/
  - app/Http/Controllers/Settings/
  - app/Http/Middleware/HandleAppearance.php
  - app/Http/Middleware/HandleInertiaRequests.php
  - app/Http/Requests/Auth/
  - app/Http/Requests/Settings/
  - bootstrap/app.php
    - $middleware->encryptCookies(except: ['appearance', 'sidebar_state']);
    - withMiddleware -> web
    - \App\Http\Middleware\HandleAppearance::class
    - \App\Http\Middleware\HandleInertiaRequests::class
    - \Illuminate\Http\Middleware\AddLinkHeadersForPreloadedAssets::class
  - config/inertia.php
  - resources/css/app.css // _@tailwind_
  - resources/js/app.ts
  - resources/js/ssr.ts
  - resources/js/actions/ // _wayfinder_
  - resources/js/components/ // _General Vue Components_
  - resources/js/components/ui // _shadcn components_
  - resources/js/composables/ // _useAppearance.ts_
  - resources/js/layouts/ // _app, auth, settings_
  - resources/js/lib/ // _utils.ts_
  - resources/js/pages/
  - resources/js/routes/ // _wayfinder_
  - resources/js/types/
  - resources/js/wayfinder/ // _wayfinder_
  - resources/views/app.blade.php
    - Inline script to detect system dark mode
    - @vite(['resources/js/app.ts', "resources/js/pages/{$page['component']}.vue"])
    - @inertiaHead
    - @inertia
  - routes/auth.php
  - routes/settings.php
  - routes/web.php // _require auth and settings_
  - tests/Feature/Auth/
  - tests/Feature/Settings/
  - tests/Feature/DashboardTest.php
  - tests/Pest.php
  - components.json // _shadcn components_
  - .eslint.config.js, .prettierrc, tsconfig.json, vite.config.ts

---

### [Laravel Fortify](https://github.com/laravel/fortify)

- Authentication backend implementation, does not provide user interface, registers the routes and controllers needed to implement all of authentication features, including login, registration, password reset, email verification, and more
- Takes the routes and controllers of starter kits and offers them as a package
- composer require laravel/fortify
- php artisan fortify:install
- php artisan vendor:publish --tag=fortify-config // _Optinal_
- php artisan migrate
- Files created/updated
  - app/Actions/Fortify
  - app/Providers/FortifyServiceProvider.php
  - bootstrap/app.php // _Add App\Providers\FortifyServiceProvider::class_
  - config/fortify.php // _Laravel\Fortify\Features_
    - Features::registration
    - Features::resetPasswords
    - Features::emailVerification
    - Features::updateProfileInformation
    - Features::updatePasswords
    - Features::twoFactorAuthentication
    - 'views' => false // _routes that are intended to return views, be careful with password.reset_
    - limiters.login // _Laravel\Fortify\Actions\EnsureLoginIsNotThrottled_
  - database/migrations/_add_two_factor_columns_to_users_table.php
- View's rendering may be customized using methods from Laravel\Fortify\Fortify (FortifyServiceProvider)
  - Fortify::loginView(fn() => view('auth.login'));
  - Fortify::authenticateUsing(function (Request $request) { ... })
  - Fortify::authenticateThrough(function (Request $request) { ... })
  - $this->app->instance(LogoutResponse::class, new class implements Laravel\Fortify\Contracts\LogoutResponse { ... })
- Two Factor Authentication
  - User is required to input a six digit numeric token
  - Token is generated using a time-based one-time password (TOTP) that can be retrieved from any TOTP compatible application such as Google Authenticator
  - App\Models\User use Laravel\Fortify\TwoFactorAuthenticatable
  - /user/two-factor-authentication
  - session('status') == two-factor-authentication-enabled
  - $request->user()->twoFactorQrCodeSvg()
  - GET /user/two-factor-qr-code
  - POST /user/confirmed-two-factor-authentication
  - session('status') == two-factor-authentication-confirmed
  - request->user()->recoveryCodes()
  - /user/two-factor-recovery-codes
  - two_factor boolean property
  - Fortify::twoFactorChallengeView(function () { ... })
  - disable DELETE /user/two-factor-authentication
- Registration
  - Fortify::registerView(function () { ... }) // _FortifyServiceProvider_
  - App\Actions\Fortify\CreateNewUser
- Password Reset
  - Fortify::requestPasswordResetLinkView(function () { ... }) // _FortifyServiceProvider_
  - session('status')
  - Fortify::resetPasswordView(function (Request $request) { ... }) // _FortifyServiceProvider_
  - App\Actions\ResetUserPassword
- Email Verification
  - App\Models\User implements Illuminate\Contracts\Auth\MustVerifyEmail
  - Fortify::verifyEmailView(function () { ... }) // _FortifyServiceProvider_
  - /email/verification-notification
  - session('status') == verification-link-sent
  - middleware(['verified']) // _Illuminate\Auth\Middleware\EnsureEmailIsVerified_
- Password Confirmation
  - password.confirm middleware
  - Fortify::confirmPasswordView(function () { ... }) // _FortifyServiceProvider_

---

### [Laravel Sanctum](https://github.com/laravel/sanctum)

- API token authentication, issue personal access tokens for API access or manage authentication for SPAs and mobile applications.
- Managing API tokens and authenticating users using session cookies or tokens
- Does not provide any routes that handle user registration, password reset, etc.
- Allows each user of your application to generate multiple API tokens
- Tokens may be granted abilities/scopes which specify which actions are allowed to perform
- Solve two separate problems
  - API Tokens
    - Issue API tokens (Similar to personal access tokens from GitHub)
    - Store user API tokens in a table and authenticate HTTP requests via the Authorization header
  - SPA Authentication
    - Uses built-in cookie based session authentication services
    - Utilizes web authentication guard
    - Will only attempt to authenticate using cookies when the incoming request originates from your own SPA frontend
    - Examines an incoming HTTP request, it will first check for an authentication cookie and, if none is present, will then examine the Authorization header for a valid API token
    - Provides CSRF protection, session authentication, and protects against leakage of the authentication credentials via XSS
- php artisan install:api // _composer require laravel/sanctum_
- php artisan migrate:fresh
- Overriding Default Models
  - PersonalAccessToken extends Laravel\Sanctum\PersonalAccessToken
  - Laravel\Sanctum\Sanctum::usePersonalAccessTokenModel(PersonalAccessToken::class) // _AppServiceProvider_
- API Token Authentication
  - The token should be included in the Authorization header as a Bearer token
  - API tokens are hashed using SHA-256
  - Sanctum authentication guard ensure that requests are authenticated as either stateful, cookie authenticated requests or contain a valid API token header
  - Sanctum will first attempt to authenticate requests using session authentication cookie. If that cookie is not present then will attempt to authenticate using a token in the request's Authorization header
  - User model should use Laravel\Sanctum\HasApiTokens
  - $token = $request->user()->createToken($request->token_name) // _Laravel\Sanctum\NewAccessToken_
  - return ['token' => $token->plainTextToken]
  - $user->tokens
  - Token Abilities
    - $user->createToken('token-name', ['server:update'])->plainTextToken
    - $user->tokenCan('server:update') or $user->tokenCant('server:update')
    - Middleware $middleware->alias([...]) // _bootstrap/app.php_
      - 'abilities' => Laravel\Sanctum\Http\Middleware\CheckAbilities::class
      - 'ability' => Laravel\Sanctum\Http\Middleware\CheckForAnyAbility::class
    - Route::middleware(['auth:sanctum', 'abilities:check-status,place-orders']) // _token has all the abilities_
    - Route::middleware(['auth:sanctum', 'ability:check-status,place-orders']) // _token has at least one of the abilities_
    - tokenCan method will always return true if the authenticated request was from your first-party SPA and you are using Sanctum's built-in SPA authentication
    - Revoking Tokens
      - $user->tokens()->delete()
      - $request->user()->currentAccessToken()->delete()
      - $user->tokens()->where('id', $tokenId)->delete()
    - Token Expiration
      - By default, never expire
      - It can be set in sanctum configuration file: 'expiration' => 525600
      - Set as third argument: return $user->createToken('token-name', ['*'], now()->addWeek())->plainTextToken
      - Schedule::command('sanctum:prune-expired --hours=24')->daily()
- SPA Authentication
  - Your SPA and API must share the same top-level domain
  - Send the Accept: application/json header and either the Referer or Origin header
  - stateful -> sanctum configuration file // _domains your SPA will be making requests from_
  - Include the port number with the domain
  - Sanctum::currentApplicationUrlWithPort() //  _return  current application URL from the APP_URL_
  - Sanctum::currentRequestHost() // _inject a placeholder into the stateful domain list_
  - $middleware->statefulApi() // _bootstrap/app.php_
  - config/cors.php // _php artisan config:publish cors_
    - supports_credentials // _Access-Control-Allow-Credentials: True_
  - resources/js/bootstrap.js
    - axios.defaults.withCredentials = true
    - axios.defaults.withXSRFToken = true
  - 'domain' => '.domain.com' // _config/session.php_
  - Authenticating
    - first make a request to /sanctum/csrf-cookie to initialize CSRF protection
    - axios.get('/sanctum/csrf-cookie').then(response => { ... })
    - set an XSRF-TOKEN cookie containing the current CSRF token
    - This token should then be URL decoded and passed in an X-XSRF-TOKEN header on subsequent requests
    - Once CSRF protection is set, make a POST request to /login route, you could use Laravel Fortify implementation
    - Route::middleware('auth:sanctum') // _routes/api.php_
- Mobile Application Authentication
  - Route::post('/sanctum/token', function (Request $request) { ... })
  - return $user->createToken($request->device_name)->plainTextToken
  - The mobile application should pass the token in the Authorization header as a Bearer token
- Testing
  - Sanctum::actingAs
- Files created/updated
  - app/Models/User.php // _Laravel\Sanctum\HasApiTokens_
  - bootstrap/app.php // _api: __DIR__.'/../routes/api.php'_
  - config/sanctum.php
  - database/migrations/2025_09_01_202245_create_personal_access_tokens_table.php
  - routes/api.php
- First-Party Request
  - Comes from a client that is part of your own application ecosystem
  - Your own web application's UI
  - Internal services or microservices
  - Often utilize session-based authentication (e.g., Laravel Sanctum with session cookies for web UIs)
  - Have a high degree of trust and control over the client application
- Third-Party Request
  - Comes from an external client or service that is not directly controlled or owned by your application
  - External APIs or integrations
  - Public API consumers
  - Often utilize token-based authentication (e.g., API tokens, OAuth tokens) for secure access
  - Require careful consideration of security, rate limiting, and access control, as the client is external and less trusted

---

### [Laravel Jetstream](https://jetstream.laravel.com)

- Implements login, registration, email verification, two-factor authentication, session management, API via Laravel Sanctum, and optional team management features
- Is designed using Tailwind CSS and offers your choice of Livewire or Inertia scaffolding
- Uses Laravel Fortify for login, registration, password reset, email verification, and more
- Jetstream implements the user interface built on top of the Fortify authentication backend
- In contrast to Laravel Breeze, Jetstream's functionality is customized via "Action" classes, app/Actions directory
- Action classes perform a single action and correspond to a single Jetstream or Fortify feature
- Doesn't support TypeScript
- Jetstream publish views and classes to your application
  - resources/views // _Livewire_
  - resources/js/Pages // _Inertia_
- Layout and Menu: resources/js/Layouts/AppLayout.vue
- Dashboard: resources/js/Pages/Dashboard.vue
- composer require laravel/jetstream
- Tailwind: postcss.config.js and tailwind.config.js
- User Profile: resources/js/Pages/Profile/Show.vue
- Create Team: App\Actions\Jetstream\CreateTeam -> resources/js/Pages/Teams/Create.vue
- Team Settings: resources/js/Pages/Teams/Show.vue
- Banner Alerts
  - resources/js/Components/Banner.vue
  - $request->session()->flash('flash.banner', 'Yay it works!')
  - $request->session()->flash('flash.bannerStyle', 'success')
  - return redirect()->route('subscriptions')->banner('Subscription created successfully.');
  - return redirect()->route('subscriptions')->warningBanner('Subscription pending approval.');
- Customize logo
  - resources/js/Components/ApplicationLogo.vue
  - resources/js/Components/ApplicationMark.vue
  - resources/js/Components/AuthenticationCardLogo.vue
- Integration with Laravel Sanctum
  - Features::api() // _config/jetstream.php_
  - Jetstream::defaultApiTokenPermissions(['read']); // _App\Providers\JetstreamServiceProvider_
  - Jetstream::permissions // _App\Providers\JetstreamServiceProvider_
  - App\Models\User use Laravel\Sanctum\HasApiTokens // _$request->user()->tokenCan('post:update')_
  - Every request will be associated with a Sanctum token
  - request to routes/web.php will be authenticated by Sanctum through an authenticated session cookie based guard
  - first-party request, the tokenCan method will always return true, policies will determine if the token has been granted permission to perform the action
- Authentication ​
  - scaffolds the login, two-factor login, registration, password reset, and email verification ​
  - Fortify defines the routes and controllers for implementing the authentication while the Jetstream UI makes requests to those routes
  - config/fortify.php
  - resources/js/Pages/Auth/Login.vue
- composer require laravel/jetstream
- php artisan jetstream:install inertia --teams --dark
  - Which Jetstream stack would you like to install
    - [x] Vue with Inertia
    - [ ] Livewire
  - Would you like any optional features
    - [x] API support
    - [x] Dark mode
    - [x] Email verification
    - [ ] Inertia SSR
    - [x] Team support
  - Which testing framework do you prefer
    - [x] Pest
    - [ ] PHPUnit
- npm install --legacy-peer-deps
- npm run build
- php artisan migrate
- npm run dev
- Files created/updated

---

### [Laravel Passport](https://github.com/laravel/passport)

- OAuth2 server and API authentication package
- built on top of the League [OAuth2 server](https://github.com/thephpleague/oauth2-server)
- php artisan install:api --passport
- php artisan passport:keys
- php artisan vendor:publish --tag=passport-config

---

### [Laravel Socialite](https://github.com/laravel/socialite)

- OAuth authentication with Bitbucket, Facebook, GitHub, GitLab, Google, LinkedIn, Slack, Twitch, and X
- composer require laravel/socialite
